<div class="container">
  <form (ngSubmit)="onSubmit(staffForm)" #staffForm="ngForm" class="staff-form">
    <h1>CREATE A NEW PROFILE ðŸ«¡</h1>
    <div class="form-group">
      <label for="name">Name</label>
      <input
        type="text"
        id="name"
        class="form-control"
        required
        [(ngModel)]="staff.name"
        name="name"
        #name="ngModel"
        pattern="^[a-zA-Z\s]+$" 
        />
      <div
        *ngIf="name.invalid && (name.dirty || name.touched)"
        class="alert alert-danger"
      >
        Name is required and should only contain letters.
      </div>
    </div>
    <div class="form-group">
      <label for="surname">Surname</label>
      <input
        type="text"
        id="surname"
        class="form-control"
        required
        [(ngModel)]="staff.surname"
        name="surname"
        #surname="ngModel"
        pattern="^[a-zA-Z\s]+$"
      />
      <div
        *ngIf="surname.invalid && (surname.dirty || surname.touched)"
        class="alert alert-danger"
      >
        Surname is required and should only contain letters.
      </div>
    </div>
    <div class="form-group">
      <label for="dateOfBirth">Date of Birth</label>
      <input
        type="date"
        id="dateOfBirth"
        class="form-control"
        [max]="maxDateOfBirth"
        required
        [(ngModel)]="staff.dateOfBirth"
        name="dateOfBirth"
        #dateOfBirth="ngModel"
      />
      <div
        *ngIf="
          dateOfBirth.invalid && (dateOfBirth.dirty || dateOfBirth.touched)
        "
        class="alert alert-danger"
      >
        Date of Birth is required.
      </div>
    </div>
    <div class="form-group">
      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        class="form-control"
        required
        [(ngModel)]="staff.email"
        name="email"
        #email="ngModel"
      />
      <div
        *ngIf="email.invalid && (email.dirty || email.touched)"
        class="alert alert-danger"
      >
        Email is required.
      </div>
    </div>
    <div class="form-group">
      <label for="image">Image</label>
      <input
        type="file"
        id="image"
        class="form-control-file"
        (change)="onImageChange($event)"
      />
    </div>
    <div class="form-group">
      <label for="phoneNumber">Phone Number</label>
      <input
        type="tel"
        id="phoneNumber"
        class="form-control"
        required
        [(ngModel)]="staff.phoneNumber"
        name="phoneNumber"
        #phoneNumber="ngModel"
        pattern="^[0-9]{10}$"
      />
      <div
        *ngIf="phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)"
        class="alert alert-danger"
      >
        Phone Number is required and should only contain 10 digits.
      </div>
    </div>

    <div class="form-group">
      <label for="userId">Username</label>
      <select
        id="userId"
        class="form-control"
        required
        [(ngModel)]="staff.userId"
        name="userId"
        #userId="ngModel"
      >
        <option *ngFor="let user of users" [value]="user.id">
          {{ user.userName }}
        </option>
      </select>
      <div
        *ngIf="userId.invalid && (userId.dirty || userId.touched)"
        class="alert alert-danger"
      >
        Username is required.
      </div>
    </div>
    <div class="form-group">
      <label for="staffRoleId">Role</label>
      <select
        id="staffRoleId"
        class="form-control"
        required
        [(ngModel)]="staff.staffRoleId"
        name="staffRoleId"
        #staffRoleId="ngModel"
      >
        <option *ngFor="let role of staffRoles" [value]="role.staffRoleId">
          {{ role.name }}
        </option>
      </select>
      <div
        *ngIf="
          staffRoleId.invalid && (staffRoleId.dirty || staffRoleId.touched)
        "
        class="alert alert-danger"
      >
        Role is required.
      </div>
    </div>
    <div class="form-group">
      <label for="description">Description</label>
      <textarea
        id="description"
        class="form-control"
        required
        [(ngModel)]="staff.description"
        name="description"
        #description="ngModel"
      ></textarea>
      <div
        *ngIf="
          description.invalid && (description.dirty || description.touched)
        "
        class="alert alert-danger"
      >
        Description is required.
      </div>
    </div>
    <button type="submit" class="btn btn-primary" [disabled]="staffForm.invalid">Create Staff Profile</button>
  </form>
</div>
